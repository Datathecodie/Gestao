<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from gestao.co.in/login by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Jun 2021 06:57:20 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<title>Gest√£o</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" href="uploads/system/uXwK4C35LgYUBMNzVxec.jpg" />
	<link rel="stylesheet" type="text/css" href="assets/auth/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="assets/auth/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="assets/auth/fonts/iconic/css/material-design-iconic-font.min.css">
	<link rel="stylesheet" type="text/css" href="assets/global/toastr/toastr.css">
	<link rel="stylesheet" type="text/css" href="assets/auth/css/util.css">
	<link rel="stylesheet" type="text/css" href="assets/auth/css/main.css">
	<link rel="stylesheet" type="text/css" href="assets/auth/css/custom.css">
	<link rel="stylesheet" type="text/css" href="assets/global/css/font.css">
</head>

<body>
	<div class="container-login100">
		<div class="wrap-login100 p-l-55 p-r-55 p-t-80 p-b-30">
			<div class="text-center">
				<img src="uploads/system/wDLdQ5Cmc4hgb7e2a8VX.jpg" class="auth-logo" alt="">
			</div>
			<div class="text-center">
			<span class="login100-form-title">
					User/Restaurant				</span>

			</div>
			<form action="https://gestao.co.in/auth/validate" method="POST" class="login100-form">
				<span class="login100-form-title p-b-37">
					Sign in				</span>

				<div class="wrap-input100 m-b-20">
					<input class="input100" type="text" name="email" placeholder="Enter your email" id="login-email">
					<span class="focus-input100"></span>
				</div>

				<div class="wrap-input100 m-b-25">
					<input class="input100" type="password" name="password" placeholder="Enter your password" id="login-pass">
					<span class="focus-input100"></span>
				</div>
				<div class="container-login100-form-btn">
					<button class="login100-form-btn">
						Sign in					</button>
				</div>

				<div class="text-center p-t-57 p-b-20">
					<span class="txt1 d-block">
						<a href="auth/forget_password.html" class="txt2 hov1">
							Forget password?
						</a>
					</span>
					<span class="txt1 d-block">
						<a href="auth/roles.html" class="txt2 hov1">
							Do not have an account?
						</a>
					</span>
					<span class="txt1">
						<a href="index.html" class="txt2 hov1">
							Get back to the homepage						</a>
					</span>
					<span class="txt1 d-block">
						<a href="javascript:void(0);" class="txt2 hov1" onclick="otppopup()">Click to Login With OTP </a>
					</span>
				</div>
			</form>
			
		</div>
	</div>

	<div class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">OTP Login</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	  <span id = "otpGet">
        <p>Enter the Phone Number to Sent OTP code to.</p>
		<input class="input100" type="text" style="border:3px; border-color: coral; border-bottom-style: groove;
  			background-color: #eee; margin-bottom:10px;" name="number" placeholder="Enter your phone no" id="otp-number">
			<button class="login100-form-btn" id="getotpnum">
							Send OTP						</button>

						<div id="recaptcha-container"></div>
	</span>
	<span id = "otpSent">
	<p>Enter the OTP code.</p>
		<input class="input100" type="number" style="border:3px; border-color: coral; border-bottom-style: groove;
  			background-color: #eee; margin-bottom:10px;" name="otp" placeholder="Enter OTP" id="otp-code">
			<button class="login100-form-btn" id="otpentered" onclick="startOTP()">
							Enter OTP						</button>
	</span>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>



<form id="otpsubmit" action="auth/validateotp" method="POST" class="login100-form">
<input type="hidden" id="phoneno" name="phone">
</form>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.6.0/umd/popper.min.js" integrity="sha512-BmM0/BQlqh02wuK5Gz9yrbe7VyIVwOzD1o40yi1IsTjriX/NGF37NyXHfmFzIlMmoSIBXgqDiG1VNU6kB5dBbA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="assets/global/toastr/toastr.min.js"></script>
	<script src="assets/auth/js/main.js"></script>
	<!-- Initialize common scripts for frontend and backend here -->
	<!-- SHOW TOASTR NOTIFIVATION -->



<script type="text/javascript">
	"use strict";

	function switch_language(language) {
		$.ajax({
			url: 'https://gestao.co.in/site/site_language',
			type: 'post',
			data: {
				language: language
			},
			success: function(response) {
				setTimeout(function() {
					location.reload();
				}, 500);
			}
		});
	}
</script>

	<script src="www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>

<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
<script src="www.gstatic.com/firebasejs/8.6.2/firebase-analytics.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
<script src="www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>

	<script>
	// Your web app's Firebase configuration
	// For Firebase JS SDK v7.20.0 and later, measurementId is optional
	var firebaseConfig = {
		apiKey: "AIzaSyA4WuvI6gmcBbpjdb-sB5sROlcJr9s5rZ0",
		authDomain: "gestao-bf269.firebaseapp.com",
		projectId: "gestao-bf269",
		storageBucket: "gestao-bf269.appspot.com",
		messagingSenderId: "266591280740",
		appId: "1:266591280740:web:edf94e5ae6ae1c3e85c971",
		measurementId: "G-NEBZ3JCQFH"
	};
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	firebase.analytics();
	</script>


	<script>

			firebase.auth().languageCode = 'en';
			window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('getotpnum', {
				'size': 'invisible',
				'callback': (response) => {
					console.log("solved")
					// reCAPTCHA solved, allow signInWithPhoneNumber.
				}
			});
	
	function otppopup(){
		console.log("hello");
		$('.modal').modal('show');
		
		$('.modal-footer').hide();
		$('#otpSent').hide();
		$("#getotpnum").click(function() {
			// check if number format legit
			
			var phone_no = $('#otp-number').val();

			const regex = /[6-9]\d{9}/g; // the "global" flag is set

			// regex.lastIndex is at 0
			if (!regex.test(phone_no) ){

				console.log("error")
				alert("Enter number in correct format. (10 Digits Only, no need of country code).")
				return;
			}

			// if legit

			const appVerifier = window.recaptchaVerifier;
			firebase.auth().signInWithPhoneNumber("+91"+phone_no, appVerifier)
				.then((confirmationResult) => {
					console.log("sent")
				// SMS sent. Prompt user to type the code from the message, then sign the
				// user in with confirmationResult.confirm(code).
				window.confirmationResult = confirmationResult;
				$('#otpSent').show();
				$('#otpGet').hide();

				// ...
				}).catch((error) => {
				// Error; SMS not sent
				console.log("not sent")
				// ...
				});
			
	});
	
}
	function startOTP(){
		// get OTP

		// check if its 6 digit number
		//if it is 6 digits then
		var otp_no = $('#otp-code').val();

		const regex = /\d{6}/g; // the "global" flag is set

		// regex.lastIndex is at 0
		if (!regex.test(otp_no) ){

			console.log("error")
			alert("Enter number in correct format. (10 Digits Only, no need of country code).")
			return;
		}

		confirmationResult.confirm(otp_no).then((result) => {
			// User signed in successfully.
			const user = result.user;
			// ...
			console.log("Login Succesful")
			// Close the thing, submit post data to login page, May need separate code

			// post to auth/validateotp
//<input type="hidden" id="phoneno" name="phone">
			$('#phoneno').val($('#otp-number').val());
			$( "#otpsubmit" ).submit();

			}).catch((error) => {
			// User couldn't sign in (bad verification code?)
			// ...
			alert("Incorrect Code!");
			});
	}
	</script>
</body>


<!-- Mirrored from gestao.co.in/login by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Jun 2021 06:57:25 GMT -->
</html>
